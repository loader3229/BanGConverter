chartout.bestdori=function(chart){
	var a=0,b=0,t=chart.split('\n'),bestdori=[];
	var bestdori_slidea=[],bestdori_slideb=[],bestdori_slideu={};
	var bestdori_longnotes=[[],[],[],[],[],[],[],[]];
	bestdori_longnotes[-1]=[];
	if(parseFloat(t[1])&&t[1].split('/')[1]===undefined)bestdori.push({type:"BPM",beat:0,bpm:parseFloat(t[1])});
	for(var i=0;t[i];i++){
		if(t[i].split('/')[1]=="4"){
			if(a==0)t[i]=t[i].split('/')[0]+'/3/'+t[i].split('/')[2];
		}
		if(t[i].split('/')[1]=="7"){
			if(b==0)t[i]=t[i].split('/')[0]+'/6/'+t[i].split('/')[2];
		}
		if(t[i].split('/')[1]=="1"){
			bestdori.push({type:"Single",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
		}
		if(t[i].split('/')[1]=="2"){
			bestdori.push({type:"Single",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,flick:true});
		}
		if(t[i].split('/')[1]=="3"){
			if(a==1)alert(i18n.unexpectedslidenote(t[i]));
			a=1;
			bestdori_slidea.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
		}
		if(t[i].split('/')[1]=="4"){
			if(a==0)alert(i18n.unexpectedslidenote(t[i]));
			a=1;
			bestdori_slidea.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
		}
		if(t[i].split('/')[1]=="5"){
			if(a==0)alert(i18n.unexpectedslidenote(t[i]));
			a=0;
			bestdori_slidea.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
			bestdori.push({type:"Slide",connections:bestdori_slidea});
			bestdori_slidea=[];
		}
		if(t[i].split('/')[1]=="6"){
			if(b==1)alert(i18n.unexpectedslidenote(t[i]));
			b=1;
			bestdori_slideb.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
		}
		if(t[i].split('/')[1]=="7"){
			if(b==0)alert(i18n.unexpectedslidenote(t[i]));
			b=1;
			bestdori_slideb.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
		}
		if(t[i].split('/')[1]=="8"){
			if(b==0)alert(i18n.unexpectedslidenote(t[i]));
			b=0;
			bestdori_slideb.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
			bestdori.push({type:"Slide",connections:bestdori_slideb});
			bestdori_slideb=[];
		}
		if(t[i].split('/')[1]=="10"){
			bestdori.push({type:"Single",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,charge:true});
		}
		if(t[i].split('/')[1]=="11"){
			bestdori.push({type:"Single",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,skill:true});
		}
		if(t[i].split('/')[1]=="12"){
			if(a==0)alert(i18n.unexpectedslidenote(t[i]));
			a=0;
			bestdori_slidea.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,flick:true});
			bestdori.push({type:"Slide",connections:bestdori_slidea});
			bestdori_slidea=[];
		}
		if(t[i].split('/')[1]=="13"){
			if(b==0)alert(i18n.unexpectedslidenote(t[i]));
			b=0;
			bestdori_slideb.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,flick:true});
			bestdori.push({type:"Slide",connections:bestdori_slideb});
			bestdori_slideb=[];
		}
		if(t[i].split('/')[1]=="20"){
			bestdori.push({type:"BPM",beat:parseFloat(t[i].split('/')[0]),bpm:parseFloat(t[i].split('/')[2])});
		}
		if(t[i].split('/')[1]=="21"){
			bestdori_longnotes[parseFloat(t[i].split('/')[2])-1].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
		}
		if(t[i].split('/')[1]=="25"){
			bestdori_longnotes[parseFloat(t[i].split('/')[2])-1].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1});
			bestdori.push({type:"Slide",connections:bestdori_longnotes[parseFloat(t[i].split('/')[2])-1]});
			bestdori_longnotes[parseFloat(t[i].split('/')[2])-1]=[];
		}
		if(t[i].split('/')[1]=="26"){
			bestdori_longnotes[parseFloat(t[i].split('/')[2])-1].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,flick:true});
			bestdori.push({type:"Slide",connections:bestdori_longnotes[parseFloat(t[i].split('/')[2])-1]});
			bestdori_longnotes[parseFloat(t[i].split('/')[2])-1]=[];
		}
		if(t[i].split('/')[1]=="31"){
			bestdori_longnotes[parseFloat(t[i].split('/')[2])-1].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,skill:true});
		}
		if(t[i].split('/')[1]=="32"){
			bestdori_longnotes[parseFloat(t[i].split('/')[2])-1].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,skill:true});
			bestdori.push({type:"Slide",connections:bestdori_longnotes[parseFloat(t[i].split('/')[2])-1]});
			bestdori_longnotes[parseFloat(t[i].split('/')[2])-1]=[];
		}
		if(t[i].split('/')[1]=="33"){
			if(a==1)alert(i18n.unexpectedslidenote(t[i]));
			a=1;
			bestdori_slidea.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,skill:true});
		}
		if(t[i].split('/')[1]=="34"){
			if(a==0)alert(i18n.unexpectedslidenote(t[i]));
			a=0;
			bestdori_slidea.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,skill:true});
			bestdori.push({type:"Slide",connections:bestdori_slidea});
			bestdori_slidea=[];
		}
		if(t[i].split('/')[1]=="35"){
			if(b==1)alert(i18n.unexpectedslidenote(t[i]));
			b=1;
			bestdori_slideb.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,skill:true});
		}
		if(t[i].split('/')[1]=="36"){
			if(b==0)alert(i18n.unexpectedslidenote(t[i]));
			b=0;
			bestdori_slideb.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,skill:true});
			bestdori.push({type:"Slide",connections:bestdori_slideb});
			bestdori_slideb=[];
		}
		if(t[i].split('/')[1]=="41"){
			if(a==0)alert(i18n.unexpectedslidenote(t[i]));
			a=1;
			bestdori_slidea.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,hidden:true});
		}
		if(t[i].split('/')[1]=="42"){
			if(b==0)alert(i18n.unexpectedslidenote(t[i]));
			b=1;
			bestdori_slideb.push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,hidden:true});
		}
		if(t[i].split('/')[1]=="51"){
			bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Left","width":1});
		}
		if(t[i].split('/')[1]=="52"){
			bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Left","width":2});
		}
		if(t[i].split('/')[1]=="53"){
			bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Left","width":3});
		}
		if(t[i].split('/')[1]=="54"){
			bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Left","width":4});
		}
		if(t[i].split('/')[1]=="55"){
			bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Left","width":5});
		}
		if(t[i].split('/')[1]=="56"){
			bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Left","width":6});
		}
		if(t[i].split('/')[1]=="57"){
			bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Left","width":7});
		}
		if(t[i].split('/')[1]=="61"){
			bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Right","width":1});
		}
		if(t[i].split('/')[1]=="62"){
			bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Right","width":2});
		}
		if(t[i].split('/')[1]=="63"){
			bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Right","width":3});
		}
		if(t[i].split('/')[1]=="64"){
			bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Right","width":4});
		}
		if(t[i].split('/')[1]=="65"){
			bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Right","width":5});
		}
		if(t[i].split('/')[1]=="66"){
			bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Right","width":6});
		}
		if(t[i].split('/')[1]=="67"){
			bestdori.push({type:"Directional",beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[2])-1,"direction":"Right","width":7});
		}
		if(t[i].split('/')[1]=="71"){
			bestdori_slideu[t[i].split('/')[2]]=bestdori_slideu[t[i].split('/')[2]]||[];
			if(bestdori_slideu[t[i].split('/')[2]].length!=0)alert(i18n.unexpectedslidenote(t[i]));
			bestdori_slideu[t[i].split('/')[2]].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[3])-1});
		}
		if(t[i].split('/')[1]=="72"){
			bestdori_slideu[t[i].split('/')[2]]=bestdori_slideu[t[i].split('/')[2]]||[];
			if(bestdori_slideu[t[i].split('/')[2]].length==0)alert(i18n.unexpectedslidenote(t[i]));
			bestdori_slideu[t[i].split('/')[2]].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[3])-1});
		}
		if(t[i].split('/')[1]=="73"){
			bestdori_slideu[t[i].split('/')[2]]=bestdori_slideu[t[i].split('/')[2]]||[];
			if(bestdori_slideu[t[i].split('/')[2]].length==0)alert(i18n.unexpectedslidenote(t[i]));
			bestdori_slideu[t[i].split('/')[2]].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[3])-1});
			bestdori.push({type:"Slide",connections:bestdori_slideu[t[i].split('/')[2]]});
			bestdori_slideu[t[i].split('/')[2]]=[];
		}
		if(t[i].split('/')[1]=="74"){
			bestdori_slideu[t[i].split('/')[2]]=bestdori_slideu[t[i].split('/')[2]]||[];
			if(bestdori_slideu[t[i].split('/')[2]].length==0)alert(i18n.unexpectedslidenote(t[i]));
			bestdori_slideu[t[i].split('/')[2]].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[3])-1,flick:true});
			bestdori.push({type:"Slide",connections:bestdori_slideu[t[i].split('/')[2]]});
			bestdori_slideu[t[i].split('/')[2]]=[];
		}
		if(t[i].split('/')[1]=="75"){
			bestdori_slideu[t[i].split('/')[2]]=bestdori_slideu[t[i].split('/')[2]]||[];
			if(bestdori_slideu[t[i].split('/')[2]].length!=0)alert(i18n.unexpectedslidenote(t[i]));
			bestdori_slideu[t[i].split('/')[2]].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[3])-1,skill:true});
		}
		if(t[i].split('/')[1]=="76"){
			bestdori_slideu[t[i].split('/')[2]]=bestdori_slideu[t[i].split('/')[2]]||[];
			if(bestdori_slideu[t[i].split('/')[2]].length==0)alert(i18n.unexpectedslidenote(t[i]));
			bestdori_slideu[t[i].split('/')[2]].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[3])-1,skill:true});
			bestdori.push({type:"Slide",connections:bestdori_slideu[t[i].split('/')[2]]});
			bestdori_slideu[t[i].split('/')[2]]=[];
		}
		if(t[i].split('/')[1]=="77"){
			bestdori_slideu[t[i].split('/')[2]]=bestdori_slideu[t[i].split('/')[2]]||[];
			if(bestdori_slideu[t[i].split('/')[2]].length==0)alert(i18n.unexpectedslidenote(t[i]));
			bestdori_slideu[t[i].split('/')[2]].push({beat:parseFloat(t[i].split('/')[0]),lane:parseFloat(t[i].split('/')[3])-1,hidden:true});
		}
	}
	if(a||b)alert(i18n.slidedoesnotend+(a?'A':"")+(b?'B':""));
	bestdori_slidea=[];
	bestdori_slideb=[];
	bestdori_longnotes=[[],[],[],[],[],[],[],[]];
	return JSON.stringify(bestdori);
}